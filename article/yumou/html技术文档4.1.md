HTML å¼€å‘æŠ€æœ¯æ–‡æ¡£

1. æ¦‚è¿°

æœ¬æ–‡æ¡£èåˆäº† HTML åŸºç¡€è§„èŒƒä¸æ¸è¿›å¢å¼ºå¼€å‘å®è·µï¼Œæ—¨åœ¨ä¸ºç°ä»£ Web å¼€å‘æä¾›ä¸€å¥—ä»åŸºç¡€å…¼å®¹æ€§åˆ°é«˜çº§ä½“éªŒçš„å®Œæ•´æŒ‡å—ã€‚å…¼å®¹æ€§ä¸ä»…æ˜¯å…œåº•æ–¹æ¡ˆï¼Œæ›´æ˜¯é¡¹ç›®åŸºç¡€æ ‡å‡†çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œæ‰€æœ‰å¼€å‘å·¥ä½œéƒ½åº”ä»æ„å»ºç¨³å®šã€å¯è®¿é—®çš„åŸºç¡€ä½“éªŒå¼€å§‹ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œåˆ†å±‚å¢å¼ºã€‚

2. æ ¸å¿ƒåŸåˆ™ä¸åŸºç¡€è§„èŒƒ

2.1 æ¸è¿›å¢å¼ºæ ¸å¿ƒåŸåˆ™

Â· å†…å®¹ä¼˜å…ˆï¼šç¡®ä¿åŸºç¡€å†…å®¹ä¸åŠŸèƒ½åœ¨æ‰€æœ‰ç¯å¢ƒä¸‹å‡å¯è®¿é—®ä¸ä½¿ç”¨
Â· åŠŸèƒ½æ£€æµ‹ä¼˜å…ˆï¼šé€šè¿‡ä»£ç æ£€æµ‹æµè§ˆå™¨æ”¯æŒæƒ…å†µï¼Œè€Œéä¾èµ–æµè§ˆå™¨ç±»å‹ï¼ˆUAï¼‰
Â· ä¼˜é›…é™çº§ï¼šç°ä»£æµè§ˆå™¨äº«å—å¢å¼ºä½“éªŒï¼Œæ—§æµè§ˆå™¨/ä½ç½‘é€Ÿç¯å¢ƒä»ä¿æŒæ ¸å¿ƒåŠŸèƒ½å¯ç”¨
Â· åˆ†å±‚å¢å¼ºï¼šä»ç¨³å®šåŸºç¡€å¼€å§‹ï¼Œé€æ­¥æ·»åŠ æ ·å¼ã€äº¤äº’å’Œé«˜çº§åŠŸèƒ½
Â· æ€§èƒ½ä¼˜å…ˆï¼šç¡®ä¿å¿«é€ŸåŠ è½½å’Œæµç•…äº¤äº’ï¼Œå¢å¼ºä¸åº”æŸå®³æ ¸å¿ƒä½“éªŒ
Â· å¯è®¿é—®æ€§ï¼šç¡®ä¿æ‰€æœ‰ç”¨æˆ·ï¼ˆåŒ…æ‹¬ä½¿ç”¨è¾…åŠ©æŠ€æœ¯è€…ï¼‰éƒ½èƒ½è®¿é—®æ ¸å¿ƒå†…å®¹ä¸åŠŸèƒ½

2.2 åŸºç¡€æ–‡æ¡£ç»“æ„ï¼ˆå…¼å®¹æ€§åŸºçŸ³ï¼‰

æ‰€æœ‰ HTML æ–‡æ¡£éœ€å…·å¤‡ä»¥ä¸‹åŸºç¡€ç»“æ„ä»¥ç¡®ä¿æœ€ä½³å…¼å®¹æ€§ä¸å¯è®¿é—®æ€§èµ·ç‚¹ï¼š

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <!-- ç§»åŠ¨ç«¯åŸºç¡€è§†å£é…ç½® -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>é¡µé¢æ ‡é¢˜ - ç½‘ç«™åç§°</title>
  <meta name="description" content="é¡µé¢æè¿°">
  
  <!-- PWA æ”¯æŒï¼ˆæ¸è¿›å¢å¼ºï¼‰ -->
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#0066cc">
  <meta name="apple-mobile-web-app-capable" content="yes">
</head>
<body>
  <!-- å†…å®¹ -->
</body>
</html>
```

2.3 è¯­ä¹‰åŒ–ä¸å¯è®¿é—®æ€§ç»“æ„

è¯­ä¹‰åŒ– HTML æ˜¯æ‰€æœ‰æµè§ˆå™¨å’Œè®¾å¤‡ç†è§£å†…å®¹çš„åŸºç¡€ï¼Œä¹Ÿæ˜¯æ¸è¿›å¢å¼ºçš„èµ·ç‚¹ï¼š

```html
<!-- è·³è¿‡å¯¼èˆªé“¾æ¥ï¼ˆå¢å¼ºå¯è®¿é—®æ€§ï¼‰ -->
<a href="#main-content" class="skip-link">è·³è‡³ä¸»è¦å†…å®¹</a>

<header role="banner">
  <nav aria-label="ä¸»å¯¼èˆª">
    <!-- å¯¼èˆªå†…å®¹ -->
  </nav>
</header>

<main id="main-content">
  <article>
    <h1>æ–‡ç« æ ‡é¢˜</h1>
    <section>
      <h2>ç« èŠ‚æ ‡é¢˜</h2>
      <p>å†…å®¹...</p>
    </section>
  </article>
</main>

<aside>
  <h2>ç›¸å…³é“¾æ¥</h2>
  <!-- è¾…åŠ©å†…å®¹ -->
</aside>

<footer role="contentinfo">
  <!-- é¡µè„šå†…å®¹ -->
</footer>
```

3. åŠŸèƒ½æ£€æµ‹ç­–ç•¥

3.1 åŠŸèƒ½æ£€æµ‹ vs UA æ£€æµ‹åŸåˆ™

âœ… æ¨èï¼šåŸºäºèƒ½åŠ›çš„æ£€æµ‹

```javascript
// é€šè¿‡èƒ½åŠ›æ£€æµ‹åˆ¤æ–­æµè§ˆå™¨æ”¯æŒ
function isFeatureSupported(feature, value) {
  if (typeof CSS !== 'undefined' && CSS.supports) {
    return CSS.supports(feature, value);
  }
  return false;
}

// ä½¿ç”¨ç¤ºä¾‹ï¼šæ ¹æ®æ”¯æŒæƒ…å†µåº”ç”¨ä¸åŒå¸ƒå±€ç±»
if (isFeatureSupported('display', 'grid')) {
  document.documentElement.classList.add('css-grid');
} else if (isFeatureSupported('display', 'flex')) {
  document.documentElement.classList.add('css-flex');
} else {
  // æ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒçš„æµ®åŠ¨å¸ƒå±€
  document.documentElement.classList.add('float-layout');
}
```

âš ï¸ è°¨æ…ä½¿ç”¨ï¼šUAæ£€æµ‹ï¼ˆä»…ç”¨äºç‰¹å®šåœºæ™¯ï¼‰

```javascript
// ä»…ç”¨äºç‰¹å®šä¼˜åŒ–åœºæ™¯ï¼Œå¦‚ç§»åŠ¨ç«¯äº¤äº’ä¼˜åŒ–
function getBrowserInfo() {
  const ua = navigator.userAgent;
  return {
    isMobile: /Mobi|Android|iPhone|iPad|iPod/.test(ua),
    isWebKit: /AppleWebKit/.test(ua) && !/Chrome/.test(ua)
  };
}
```

3.2 ç°ä»£æ£€æµ‹æ–¹æ¡ˆ

```javascript
// è½»é‡çº§åŠŸèƒ½æ£€æµ‹å™¨
class FeatureDetector {
  static detect() {
    return {
      // CSS ç‰¹æ€§
      css: {
        grid: CSS.supports('display', 'grid'),
        flex: CSS.supports('display', 'flex'),
        variables: CSS.supports('--test', 'value'),
        gap: CSS.supports('gap', '1px'),
        containerQueries: CSS.supports('container-type', 'inline-size')
      },
      
      // JavaScript API
      js: {
        promises: typeof Promise !== 'undefined',
        fetch: typeof fetch !== 'undefined',
        intersectionObserver: 'IntersectionObserver' in window,
        dynamicImport: 'import' in Function.prototype,
        serviceWorker: 'serviceWorker' in navigator
      }
    };
  }
}

// åˆå§‹åŒ–ç¯å¢ƒç±»
document.addEventListener('DOMContentLoaded', () => {
  const features = FeatureDetector.detect();
  const html = document.documentElement;
  
  // è®¾ç½®åŠŸèƒ½æ”¯æŒç±»åï¼Œä¾›CSSå’ŒJSä½¿ç”¨
  if (features.css.grid) html.classList.add('has-grid');
  if (features.css.flex) html.classList.add('has-flex');
  if (features.css.containerQueries) html.classList.add('has-container-queries');
  if (features.js.intersectionObserver) html.classList.add('has-io');
  
  // æ ‡è®°JavaScriptå·²å¯ç”¨
  html.classList.remove('no-js');
  html.classList.add('js');
});
```

4. CSS æ¸è¿›å¢å¼ºç­–ç•¥

4.1 ç‰¹æ€§æŸ¥è¯¢ (@supports)

```css
/* åŸºç¡€æ ·å¼ - æ‰€æœ‰æµè§ˆå™¨ */
.container {
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  /* ä¼ ç»Ÿå¸ƒå±€æ–¹æ¡ˆ */
  overflow: hidden;
}

.container > * {
  float: left;
  width: 100%;
  margin-bottom: 16px;
}

/* Flexbox æ”¯æŒæ—¶ï¼ˆä¸­ç­‰å¢å¼ºï¼‰ */
@supports (display: flex) {
  .container {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    overflow: visible;
  }
  
  .container > * {
    float: none;
    margin-bottom: 0;
    flex: 1 1 300px;
  }
}

/* Grid æ”¯æŒæ—¶ï¼ˆé«˜çº§å¢å¼ºï¼‰ */
@supports (display: grid) {
  .container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
  }
  
  .container > * {
    flex: none;
  }
}

/* CSS å˜é‡æ”¯æŒæ—¶ */
@supports (--css: variables) {
  :root {
    --primary-color: #0066cc;
    --spacing: 16px;
  }
  
  .component {
    color: var(--primary-color);
    padding: var(--spacing);
  }
  
  /* ä¸æ”¯æŒCSSå˜é‡çš„å›é€€ */
  .component {
    color: #0066cc;
    padding: 16px;
  }
}
```

4.2 å®¹å™¨æŸ¥è¯¢æ”¯æŒï¼ˆç°ä»£å¸ƒå±€å¢å¼ºï¼‰

```css
/* åŸºç¡€æ ·å¼ - æ‰€æœ‰æµè§ˆå™¨ */
.card {
  width: 100%;
  border: 1px solid #ddd;
  padding: 16px;
  margin-bottom: 20px;
}

.card__image {
  width: 100%;
  height: auto;
  margin-bottom: 12px;
}

/* æ”¯æŒå®¹å™¨æŸ¥è¯¢æ—¶ï¼ˆç°ä»£æµè§ˆå™¨å¢å¼ºï¼‰ */
@supports (container-type: inline-size) {
  .card-container {
    container-type: inline-size;
    container-name: card-container;
  }
  
  @container card-container (min-width: 400px) {
    .card {
      display: flex;
      gap: 1rem;
    }
    
    .card__image {
      width: 40%;
      margin-bottom: 0;
    }
  }
  
  @container card-container (min-width: 600px) {
    .card {
      display: grid;
      grid-template-columns: 1fr 2fr;
    }
    
    .card__image {
      width: 100%;
    }
  }
}
```

4.3 ç°ä»£å¸ƒå±€å›é€€æ¨¡å¼

```html
<!-- ç»„ä»¶ç¤ºä¾‹ï¼šå¡ç‰‡ -->
<div class="card">
  <img src="basic.jpg" alt="äº§å“å›¾ç‰‡" class="card__image">
  <div class="card__content">
    <h2 class="card__title">äº§å“æ ‡é¢˜</h2>
    <p class="card__description">åŸºç¡€æè¿°å†…å®¹ï¼Œæ‰€æœ‰ç”¨æˆ·å¯è§</p>
    <a href="/product/details" class="card__link">æŸ¥çœ‹è¯¦æƒ…</a>
  </div>
  
  <!-- å¢å¼ºå†…å®¹ï¼šä»…å½“æ”¯æŒæ—¶æ˜¾ç¤º -->
  <div class="card__enhanced" hidden>
    <p class="card__extra-info">å¢å¼ºä¿¡æ¯ï¼šå®æ—¶åº“å­˜ã€3Dé¢„è§ˆç­‰</p>
    <button class="card__quick-view" data-product-id="123">å¿«é€ŸæŸ¥çœ‹</button>
  </div>
</div>
```

```css
/* åŸºç¡€æ ·å¼ */
.card {
  border: 1px solid #ddd;
  padding: 16px;
}

.card__enhanced {
  display: none;
}

/* JavaScriptå¯ç”¨æ—¶çš„æ ·å¼ */
.js .card__enhanced {
  display: block;
}

/* ç‰¹å®šåŠŸèƒ½æ”¯æŒæ—¶çš„å¢å¼ºæ ·å¼ */
.has-grid .card__enhanced {
  display: grid;
  gap: 8px;
}

/* æ— JavaScriptæ—¶çš„é™çº§å¤„ç† */
.no-js .card__enhanced {
  display: none !important;
}

.no-js .card__link {
  display: block;
  padding: 12px;
  background: #0066cc;
  color: white;
  text-align: center;
}
```


4.4 å¸ƒå±€æ˜“ç”¨æ€§ä¼˜åŒ–

è‰¯å¥½çš„å¸ƒå±€ä¸ä»…è¦å®ç°è®¾è®¡æ•ˆæœï¼Œæ›´è¦è€ƒè™‘ç”¨æˆ·çš„ä½¿ç”¨ä½“éªŒã€‚å¸ƒå±€æ˜“ç”¨æ€§æ˜¯æŒ‡ç”¨æˆ·èƒ½å¤Ÿè½»æ¾ç†è§£å’Œæ“ä½œç•Œé¢å¸ƒå±€çš„ç¨‹åº¦ã€‚

4.4.1 æ˜“ç”¨æ€§æ ¸å¿ƒåŸåˆ™

Â· ç›´è§‚æ€§ï¼šå¸ƒå±€å…ƒç´ åº”ç¬¦åˆç”¨æˆ·é¢„æœŸï¼Œå‡å°‘è®¤çŸ¥è´Ÿæ‹…
Â· ä¸€è‡´æ€§ï¼šç›¸ä¼¼åŠŸèƒ½çš„å…ƒç´ åœ¨ä¸åŒé¡µé¢åº”ä¿æŒä¸€è‡´çš„å¸ƒå±€æ–¹å¼
Â· å¯é¢„æµ‹æ€§ï¼šç”¨æˆ·åº”èƒ½é¢„æµ‹äº¤äº’è¡Œä¸ºçš„ç»“æœ
Â· åé¦ˆæœºåˆ¶ï¼šç”¨æˆ·æ“ä½œååº”å¾—åˆ°åŠæ—¶æ˜ç¡®çš„è§†è§‰åé¦ˆ

4.4.2 æ˜“ç”¨æ€§å®ç°ç­–ç•¥

1. è§†è§‰å±‚æ¬¡æ¸…æ™°
   - é€šè¿‡å­—ä½“å¤§å°ã€é¢œè‰²å¯¹æ¯”åº¦å’Œé—´è·å»ºç«‹æ˜ç¡®çš„ä¿¡æ¯å±‚çº§
   - é‡è¦å†…å®¹åº”åœ¨è§†è§‰ä¸Šçªå‡ºæ˜¾ç¤º
   - é¿å…è¿‡å¤šè£…é¥°å…ƒç´ å¹²æ‰°ä¸»è¦å†…å®¹

2. å¯¼èˆªæ˜“ç”¨æ€§
   - ä¸»å¯¼èˆªåº”å§‹ç»ˆå¯è§ä¸”ä½ç½®å›ºå®š
   - é¢åŒ…å±‘å¯¼èˆªå¸®åŠ©ç”¨æˆ·äº†è§£å½“å‰ä½ç½®
   - æœç´¢åŠŸèƒ½åº”æ˜“äºå‘ç°å’Œä½¿ç”¨

3. å“åº”å¼äº¤äº’è®¾è®¡
   - è§¦æ§ç›®æ ‡å¤§å°åº”é€‚åˆæ‰‹æŒ‡æ“ä½œï¼ˆè‡³å°‘44pxï¼‰
   - äº¤äº’å…ƒç´ é—´åº”æœ‰è¶³å¤Ÿçš„é—´è·é¿å…è¯¯è§¦
   - çŠ¶æ€å˜åŒ–åº”æœ‰æ˜æ˜¾çš„è§†è§‰æŒ‡ç¤º

4.5 å¸ƒå±€ç´§å‡‘æ€§ä¼˜åŒ–

å¸ƒå±€ç´§å‡‘æ€§æ˜¯æŒ‡åœ¨æœ‰é™ç©ºé—´å†…é«˜æ•ˆç»„ç»‡å†…å®¹ï¼Œæ—¢ä¸æµªè´¹ç©ºé—´ä¹Ÿä¸æ˜¾å¾—æ‹¥æŒ¤ï¼Œè¾¾åˆ°è§†è§‰å¹³è¡¡å’Œä¿¡æ¯å¯†åº¦çš„æœ€ä½³ç»“åˆã€‚

4.5.1 ç´§å‡‘æ€§è®¾è®¡åŸåˆ™

Â· ç©ºé—´åˆ©ç”¨ç‡ï¼šæœ€å¤§åŒ–æœ‰æ•ˆä¿¡æ¯å±•ç¤ºåŒºåŸŸ
Â· è§†è§‰å‘¼å¸æ„Ÿï¼šä¿æŒé€‚å½“ç•™ç™½é¿å…å‹è¿«æ„Ÿ
Â· ä¿¡æ¯å¯†åº¦æ§åˆ¶ï¼šåœ¨æ¸…æ™°åº¦å’Œä¿¡æ¯é‡é—´å–å¾—å¹³è¡¡
Â· çµæ´»é€‚é…ï¼šä¸åŒå±å¹•å°ºå¯¸ä¸‹ä¿æŒè‰¯å¥½ç´§å‡‘æ€§

4.5.2 ç´§å‡‘æ€§å®ç°æ–¹æ³•

1. ç½‘æ ¼ç³»ç»Ÿåº”ç”¨
   - ä½¿ç”¨12åˆ—æˆ–8åˆ—ç½‘æ ¼ç³»ç»Ÿè§„èŒƒå¸ƒå±€ç»“æ„
   - ä¿æŒå…ƒç´ é—´çš„å¯¹é½å…³ç³»
   - åˆç†åˆ©ç”¨æ …æ ¼é—´è·åˆ›é€ èŠ‚å¥æ„Ÿ

2. é—´è·ä¼˜åŒ–
   - ç»Ÿä¸€å†…å¤–è¾¹è·æ ‡å‡†ï¼Œå»ºç«‹è§†è§‰éŸµå¾‹
   - ç›¸å…³å…ƒç´ é è¿‘æ’åˆ—ï¼Œæ— å…³å…ƒç´ é€‚å½“åˆ†ç¦»
   - ä½¿ç”¨è´Ÿç©ºé—´å¼•å¯¼è§†è§‰ç„¦ç‚¹

3. ç»„ä»¶å¤ç”¨ä¸ç»„åˆ
   - è®¾è®¡å¯å¤ç”¨çš„åŸºç¡€ç»„ä»¶å‡å°‘å†—ä½™
   - é€šè¿‡ç»„ä»¶ç»„åˆå®ç°å¤æ‚å¸ƒå±€
   - ä¿æŒç»„ä»¶é—´çš„ä¸€è‡´æ€§

4. è‡ªé€‚åº”å¸ƒå±€æŠ€æœ¯
   - ä½¿ç”¨Flexboxå’ŒGridå®ç°çµæ´»å¸ƒå±€
   - é€šè¿‡åª’ä½“æŸ¥è¯¢è°ƒæ•´å¸ƒå±€å¯†åº¦
   - åˆ©ç”¨CSSè‡ªå®šä¹‰å±æ€§ç»´æŠ¤è®¾è®¡ç³»ç»Ÿ

4.5.3 ç´§å‡‘æ€§è¯„ä¼°æ ‡å‡†

Â· å†…å®¹å®Œæ•´æ€§ï¼šæ‰€æœ‰å¿…è¦ä¿¡æ¯éƒ½èƒ½å®Œæ•´å±•ç¤º
Â· è§†è§‰èˆ’é€‚åº¦ï¼šæ— æ˜æ˜¾æ‹¥æŒ¤æˆ–ç©ºæ—·æ„Ÿ
Â· æ“ä½œä¾¿åˆ©æ€§ï¼šäº¤äº’å…ƒç´ æ˜“äºè§¦åŠå’Œæ“ä½œ
Â· å“åº”é€Ÿåº¦ï¼šå¸ƒå±€å˜åŒ–æµç•…ä¸å¡é¡¿
5. èµ„æºåŠ è½½ä¼˜åŒ–

5.1 æ™ºèƒ½èµ„æºåŠ è½½ç­–ç•¥

```html
<head>
  <!-- 1. å…³é”®CSSï¼šå†…è”æˆ–åŒæ­¥åŠ è½½ -->
  <style>
    /* å…³é”®CSSå†…å®¹ï¼šé¦–å±æ ·å¼ */
    .header { position: fixed; top: 0; left: 0; right: 0; }
    .main-content { margin-top: 60px; }
    .critical-component { display: block; }
  </style>
  
  <!-- 2. é¢„åŠ è½½å…³é”®èµ„æº -->
  <link rel="preload" href="font.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="hero-image.jpg" as="image" media="(min-width: 800px)">
  
  <!-- 3. æ ¸å¿ƒCSSï¼šæ‰€æœ‰æµè§ˆå™¨ -->
  <link rel="stylesheet" href="core.css" media="all">
  
  <!-- 4. éå…³é”®CSSå¼‚æ­¥åŠ è½½ï¼ˆæ¸è¿›å¢å¼ºï¼‰ -->
  <link rel="stylesheet" href="enhanced.css" media="print" onload="this.media='all'">
  
  <!-- 5. ä¸æ”¯æŒJavaScriptæ—¶çš„å¤‡ç”¨ -->
  <noscript>
    <link rel="stylesheet" href="noscript.css">
  </noscript>
</head>

<body>
  <!-- 6. è„šæœ¬åŠ è½½ç­–ç•¥ -->
  <!-- ç°ä»£æµè§ˆå™¨ï¼šESæ¨¡å— -->
  <script type="module" src="modern.js"></script>
  
  <!-- ä¼ ç»Ÿæµè§ˆå™¨ï¼šä¼ ç»Ÿè„šæœ¬ï¼ˆå¸¦nomoduleå›é€€ï¼‰ -->
  <script nomodule src="legacy.js"></script>
  
  <!-- åŸºç¡€åŠŸèƒ½è„šæœ¬ï¼šå§‹ç»ˆåŠ è½½ -->
  <script src="core.js" defer></script>
</body>
```

5.2 å›¾ç‰‡ä¼˜åŒ–ä¸ç°ä»£æ ¼å¼

```html
<!-- å“åº”å¼å›¾ç‰‡ï¼šæ ¹æ®è®¾å¤‡ã€DPRå’Œæ”¯æŒæ ¼å¼åŠ è½½ -->
<picture>
  <!-- ç°ä»£æ ¼å¼ä¼˜å…ˆï¼ˆAVIFï¼‰ -->
  <source 
    type="image/avif" 
    srcset="image-320.avif 320w,
            image-640.avif 640w,
            image-1024.avif 1024w"
    sizes="(max-width: 600px) 100vw, 50vw">
  
  <!-- æ¬¡æ–°æ ¼å¼ï¼ˆWebPï¼‰ -->
  <source 
    type="image/webp" 
    srcset="image-320.webp 320w,
            image-640.webp 640w,
            image-1024.webp 1024w"
    sizes="(max-width: 600px) 100vw, 50vw">
  
  <!-- æœ€ç»ˆå›é€€ï¼ˆJPEGï¼‰ -->
  <img 
    src="image-320.jpg" 
    srcset="image-320.jpg 320w,
            image-640.jpg 640w,
            image-1024.jpg 1024w"
    sizes="(max-width: 600px) 100vw, 50vw"
    alt="æè¿°æ€§æ–‡å­—"
    loading="lazy"  <!-- åŸç”Ÿæ‡’åŠ è½½ -->
    width="640"
    height="360"
    class="responsive-image">
</picture>

<!-- ä¸æ”¯æŒpictureæ—¶çš„å›é€€ -->
<noscript>
  <img src="image-640.jpg" alt="æè¿°æ€§æ–‡å­—" width="640" height="360">
</noscript>
```

5.3 å­—ä½“åŠ è½½ä¼˜åŒ–

```css
/* é˜¶æ®µ1ï¼šç³»ç»Ÿå­—ä½“æ ˆ - ç¡®ä¿æ–‡æœ¬ç«‹å³å¯è¯» */
body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 
               'Helvetica Neue', Arial, sans-serif;
  line-height: 1.6;
  color: #333;
}

/* é˜¶æ®µ2ï¼šæ”¯æŒå­—ä½“åŠ è½½APIæ—¶çš„Webå­—ä½“å¢å¼º */
@supports (font-display: swap) {
  @font-face {
    font-family: 'CustomFont';
    src: url('font.woff2') format('woff2');
    font-display: swap;
    font-weight: 400;
    unicode-range: U+000-5FF; /* ä»…åŠ è½½æ‹‰ä¸å­—ç¬¦ */
  }
  
  .enhanced-typography {
    font-family: 'CustomFont', -apple-system, sans-serif;
  }
}

/* é˜¶æ®µ3ï¼šä¸æ”¯æŒå­—ä½“äº¤æ¢æ—¶çš„å›é€€ */
@supports not (font-display: swap) {
  .enhanced-typography {
    font-family: -apple-system, sans-serif;
  }
  
  /* å¯é€‰ï¼šéšè—æœªå›é€€çš„FOUC */
  .enhanced-typography {
    visibility: hidden;
  }
  
  .fonts-loaded .enhanced-typography {
    visibility: visible;
  }
}
```

```javascript
// å­—ä½“åŠ è½½æ§åˆ¶
if ('fonts' in document) {
  document.fonts.load('1em "CustomFont"').then(() => {
    document.documentElement.classList.add('fonts-loaded');
  });
}
```

6. JavaScript æ¸è¿›å¢å¼º

6.1 åº”ç”¨æ¶æ„ä¸æ¨¡å—åŒ–åŠ è½½

```javascript
// æ¸è¿›å¢å¼ºåº”ç”¨ä¸»ç±»
class ProgressiveApp {
  constructor() {
    this.features = FeatureDetector.detect();
    this.init();
  }
  
  async init() {
    // è®¾ç½®ç¯å¢ƒç±»å
    this.setEnvironmentClasses();
    
    // åŠ è½½æ ¸å¿ƒåŠŸèƒ½ï¼ˆæ‰€æœ‰ç”¨æˆ·ï¼‰
    await this.loadCoreFeatures();
    
    // æŒ‰éœ€åŠ è½½å¢å¼ºåŠŸèƒ½ï¼ˆæ¡ä»¶åŠ è½½ï¼‰
    await this.loadEnhancedFeatures();
    
    // åˆå§‹åŒ–æ€§èƒ½ç›‘æ§
    this.initPerformanceMonitoring();
  }
  
  setEnvironmentClasses() {
    const html = document.documentElement;
    const supportLevel = this.getSupportLevel();
    
    html.classList.add(`support-${supportLevel}`);
    html.setAttribute('data-support-level', supportLevel);
  }
  
  getSupportLevel() {
    const { css, js } = this.features;
    
    if (css.grid && css.containerQueries && js.intersectionObserver) {
      return 'high';
    } else if (css.flex && js.promises) {
      return 'medium';
    }
    return 'basic';
  }
  
  async loadCoreFeatures() {
    // æ‰€æœ‰ç¯å¢ƒéƒ½éœ€è¦çš„åŸºç¡€åŠŸèƒ½
    const coreModules = ['navigation', 'forms', 'content'];
    
    for (const module of coreModules) {
      try {
        // åŠ¨æ€å¯¼å…¥æˆ–åŠ è½½è„šæœ¬
        if (this.features.js.dynamicImport) {
          await import(`./core/${module}.js`);
        } else {
          await this.loadScript(`./core/${module}.js`);
        }
      } catch (error) {
        console.warn(`æ ¸å¿ƒæ¨¡å— ${module} åŠ è½½å¤±è´¥ï¼Œé™çº§å¤„ç†`, error);
        this.fallbackToBasic(module);
      }
    }
  }
  
  async loadEnhancedFeatures() {
    // æ ¹æ®æ£€æµ‹ç»“æœåŠ è½½å¢å¼ºåŠŸèƒ½
    const enhancements = [];
    
    if (this.features.js.intersectionObserver) {
      enhancements.push('lazy-loading');
    }
    
    if (this.features.css.grid) {
      enhancements.push('grid-layouts');
    }
    
    if (this.features.css.containerQueries) {
      enhancements.push('container-components');
    }
    
    // å¹¶è¡ŒåŠ è½½å¢å¼ºåŠŸèƒ½
    const promises = enhancements.map(enhancement => 
      this.loadFeatureSafely(enhancement)
    );
    
    await Promise.allSettled(promises);
  }
  
  async loadFeatureSafely(featureName) {
    try {
      const module = await import(`./enhancements/${featureName}.js`);
      module.init();
      return module;
    } catch (error) {
      console.warn(`å¢å¼ºåŠŸèƒ½ ${featureName} åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨åŸºç¡€ç‰ˆæœ¬`);
      return null;
    }
  }
}

// åº”ç”¨åˆå§‹åŒ–
document.addEventListener('DOMContentLoaded', () => {
  if (typeof Promise !== 'undefined') {
    window.app = new ProgressiveApp();
  } else {
    // æ— Promiseæ”¯æŒçš„ç¯å¢ƒä½¿ç”¨æœ€ç®€æ¨¡å¼
    initBasicFunctionality();
  }
});
```

6.2 åŠ¨æ€å¯¼å…¥ä¸ä»£ç åˆ†å‰²

```javascript
// æŒ‰éœ€åŠ è½½åŠŸèƒ½æ¨¡å—
class DynamicLoader {
  static async loadFeature(featureName, condition) {
    // æ£€æŸ¥åŠ è½½æ¡ä»¶
    if (!condition()) {
      return null;
    }
    
    // æ£€æŸ¥æ˜¯å¦å·²åŠ è½½
    if (window.loadedFeatures && window.loadedFeatures[featureName]) {
      return window.loadedFeatures[featureName];
    }
    
    // æ€§èƒ½æ ‡è®°å¼€å§‹
    performance.mark(`${featureName}-load-start`);
    
    try {
      // åŠ¨æ€å¯¼å…¥æ¨¡å—
      const module = await import(`./features/${featureName}.js`);
      
      // ç¼“å­˜æ¨¡å—
      if (!window.loadedFeatures) window.loadedFeatures = {};
      window.loadedFeatures[featureName] = module;
      
      // æ€§èƒ½æ ‡è®°ç»“æŸ
      performance.mark(`${featureName}-load-end`);
      performance.measure(
        `${featureName}-load-time`,
        `${featureName}-load-start`,
        `${featureName}-load-end`
      );
      
      return module;
    } catch (error) {
      console.warn(`åŠŸèƒ½ ${featureName} åŠ è½½å¤±è´¥:`, error);
      
      // é™çº§åˆ°åŸºç¡€å®ç°
      return this.loadFallback(featureName);
    }
  }
  
  // æ™ºèƒ½é¢„åŠ è½½ï¼ˆåŸºäºç”¨æˆ·è¡Œä¸ºé¢„æµ‹ï¼‰
  static prefetchCriticalFeatures() {
    // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å¤„äºèŠ‚æµæ¨¡å¼
    if ('connection' in navigator && navigator.connection.saveData) {
      return; // èŠ‚æµæ¨¡å¼ä¸é¢„åŠ è½½
    }
    
    // åŸºäºè·¯ç”±é¢„åŠ è½½
    const currentPath = window.location.pathname;
    const criticalFeatures = this.getFeaturesForPath(currentPath);
    
    criticalFeatures.forEach(feature => {
      if (!this.isFeatureLoaded(feature)) {
        const link = document.createElement('link');
        link.rel = 'prefetch';
        link.href = `/features/${feature}.js`;
        link.as = 'script';
        document.head.appendChild(link);
      }
    });
  }
  
  static loadFallback(featureName) {
    // åŠ è½½é™çº§ç‰ˆæœ¬æˆ–æä¾›åŸºæœ¬åŠŸèƒ½
    switch (featureName) {
      case 'advanced-charts':
        return this.loadBasicCharts();
      case 'rich-text-editor':
        return this.loadBasicTextarea();
      default:
        console.log(`åŠŸèƒ½ ${featureName} ä¸å¯ç”¨`);
        return null;
    }
  }
}

// ä½¿ç”¨ç¤ºä¾‹ï¼šæ¡ä»¶åŠ è½½é«˜çº§å›¾è¡¨
document.addEventListener('DOMContentLoaded', () => {
  const chartContainer = document.getElementById('chart-container');
  
  if (chartContainer) {
    // æ£€æµ‹ç”¨æˆ·æ˜¯å¦å¯èƒ½æŸ¥çœ‹å›¾è¡¨
    const userInteracted = localStorage.getItem('viewed-charts') === 'true';
    
    if (userInteracted || isElementInViewport(chartContainer)) {
      DynamicLoader.loadFeature('advanced-charts', () => {
        return FeatureDetector.detect().js.promises && 
               FeatureDetector.detect().css.grid;
      }).then(module => {
        module?.init(chartContainer);
      });
    }
  }
});
```

6.3 é”™è¯¯å¤„ç†ä¸é™çº§æœºåˆ¶

```javascript
// å®‰å…¨çš„ç‰¹æ€§ä½¿ç”¨å°è£…
class SafeFeature {
  // å®‰å…¨åœ°ä½¿ç”¨IntersectionObserver
  static useIntersectionObserver(callback, options = {}) {
    if ('IntersectionObserver' in window) {
      try {
        const observer = new IntersectionObserver(callback, options);
        return {
          observer,
          isNative: true
        };
      } catch (error) {
        // æ„é€ å¤±è´¥æ—¶é™çº§
        return this.fallbackToScrollListener(callback);
      }
    } else {
      // å®Œå…¨ä¸æ”¯æŒæ—¶é™çº§
      return this.fallbackToScrollListener(callback);
    }
  }
  
  static fallbackToScrollListener(callback) {
    // åŸºäºæ»šåŠ¨äº‹ä»¶çš„é™çº§å®ç°
    let ticking = false;
    
    const onScroll = () => {
      if (!ticking) {
        window.requestAnimationFrame(() => {
          // æ¨¡æ‹ŸIntersectionObserverè¡Œä¸º
          const viewportHeight = window.innerHeight;
          const elements = document.querySelectorAll('[data-observe]');
          
          elements.forEach(el => {
            const rect = el.getBoundingClientRect();
            const isVisible = (
              rect.top >= 0 &&
              rect.left >= 0 &&
              rect.bottom <= viewportHeight &&
              rect.right <= window.innerWidth
            );
            
            callback([{
              target: el,
              isIntersecting: isVisible,
              intersectionRatio: isVisible ? 1 : 0
            }]);
          });
          
          ticking = false;
        });
        
        ticking = true;
      }
    };
    
    window.addEventListener('scroll', onScroll, { passive: true });
    
    // åˆå§‹æ£€æŸ¥
    onScroll();
    
    return {
      observer: { disconnect: () => window.removeEventListener('scroll', onScroll) },
      isNative: false
    };
  }
  
  // å®‰å…¨åœ°ä½¿ç”¨Fetch API
  static async fetchWithFallback(url, options) {
    if (typeof fetch !== 'undefined') {
      try {
        const response = await fetch(url, options);
        
        if (!response.ok) {
          throw new Error(`HTTP ${response.status}`);
        }
        
        return response;
      } catch (error) {
        console.warn('Fetchå¤±è´¥ï¼Œå°è¯•é™çº§æ–¹æ¡ˆ:', error);
        return this.xhrFallback(url, options);
      }
    } else {
      return this.xhrFallback(url, options);
    }
  }
  
  static xhrFallback(url, options) {
    return new Promise((resolve, reject) => {
      const xhr = new XMLHttpRequest();
      xhr.open(options?.method || 'GET', url);
      
      // è®¾ç½®å¤´éƒ¨
      if (options?.headers) {
        Object.keys(options.headers).forEach(key => {
          xhr.setRequestHeader(key, options.headers[key]);
        });
      }
      
      xhr.onload = () => {
        if (xhr.status >= 200 && xhr.status < 300) {
          resolve(new Response(xhr.responseText, {
            status: xhr.status,
            statusText: xhr.statusText,
            headers: new Headers({ 'content-type': xhr.getResponseHeader('content-type') })
          }));
        } else {
          reject(new Error(`XHR ${xhr.status}`));
        }
      };
      
      xhr.onerror = reject;
      xhr.send(options?.body);
    });
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const imageObserver = SafeFeature.useIntersectionObserver(
  (entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const img = entry.target;
        img.src = img.dataset.src;
        img.classList.add('loaded');
      }
    });
  },
  { rootMargin: '50px' }
);

// è§‚å¯Ÿå…ƒç´ 
document.querySelectorAll('.lazy-image').forEach(img => {
  imageObserver.observer.observe(img);
});
```

7. è¡¨å•å¢å¼ºå®è·µ

7.1 å¯è®¿é—®è¡¨å•åŸºç¡€

```html
<form id="example-form" novalidate class="progressive-form">
  <fieldset>
    <legend>ä¸ªäººä¿¡æ¯</legend>
    
    <div class="form-group">
      <label for="email" class="required">
        é‚®ç®±åœ°å€
        <span class="required-text">(å¿…å¡«)</span>
      </label>
      
      <input 
        type="email" 
        id="email" 
        name="email"
        required
        autocomplete="email"
        aria-describedby="email-help email-error"
        aria-required="true"
        placeholder="your@email.com">
      
      <!-- å¸®åŠ©æ–‡æœ¬ -->
      <div id="email-help" class="help-text">
        è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€ï¼Œæˆ‘ä»¬å°†å‘é€ç¡®è®¤é‚®ä»¶
      </div>
      
      <!-- é”™è¯¯ä¿¡æ¯å®¹å™¨ -->
      <div id="email-error" class="error-message" aria-live="assertive"></div>
    </div>
    
    <div class="form-group">
      <label for="phone">æ‰‹æœºå·ç </label>
      <input 
        type="tel" 
        id="phone" 
        name="phone"
        autocomplete="tel"
        pattern="[0-9]{11}"
        inputmode="numeric"
        placeholder="13800138000">
      
      <!-- å¢å¼ºï¼šå®æ—¶æ ¼å¼æç¤º -->
      <div class="format-hint" hidden>
        æ ¼å¼ï¼š11ä½æ•°å­—
      </div>
    </div>
  </fieldset>
  
  <div class="form-actions">
    <button type="submit" class="btn-primary">
      æäº¤
    </button>
    
    <!-- æ— JavaScriptæ—¶çš„å¤‡ç”¨ -->
    <noscript>
      <p class="noscript-notice">
        å¯ç”¨JavaScriptå¯è·å¾—æ›´å¥½çš„è¡¨å•ä½“éªŒ
      </p>
    </noscript>
  </div>
</form>
```

7.2 æ¸è¿›éªŒè¯å¢å¼º

```javascript
// è¡¨å•éªŒè¯å¢å¼ºå™¨
class FormEnhancer {
  constructor(form) {
    this.form = form;
    this.fields = Array.from(form.querySelectorAll('[required], [pattern]'));
    this.init();
  }
  
  init() {
    // åŸºç¡€HTML5éªŒè¯
    this.form.addEventListener('submit', this.validateOnSubmit.bind(this));
    
    // å®æ—¶éªŒè¯å¢å¼ºï¼ˆæ”¯æŒæ—¶ï¼‰
    if ('oninput' in this.form) {
      this.setupRealTimeValidation();
    }
    
    // è‡ªå®šä¹‰æ ·å¼å¢å¼º
    this.enhanceValidationUI();
    
    // å¼‚æ­¥éªŒè¯æ”¯æŒ
    if (typeof Promise !== 'undefined') {
      this.setupAsyncValidation();
    }
  }
  
  validateOnSubmit(event) {
    // åŸºç¡€éªŒè¯
    if (!this.form.checkValidity()) {
      event.preventDefault();
      this.showAllErrors();
      this.focusFirstInvalid();
      return;
    }
    
    // å¢å¼ºéªŒè¯ï¼ˆæ”¯æŒæ—¶ï¼‰
    if (this.features.promises) {
      event.preventDefault();
      this.validateAsync().then(isValid => {
        if (isValid) {
          this.form.submit();
        }
      });
    }
  }
  
  setupRealTimeValidation() {
    // é˜²æŠ–éªŒè¯
    this.debouncedValidate = this.debounce((field) => {
      this.validateField(field);
    }, 300);
    
    this.fields.forEach(field => {
      field.addEventListener('input', () => this.debouncedValidate(field));
      field.addEventListener('blur', () => this.validateField(field));
    });
  }
  
  validateField(field) {
    const errorElement = field.parentElement.querySelector('.error-message');
    
    if (!field.validity.valid) {
      this.showError(field, errorElement);
      return false;
    } else {
      this.clearError(errorElement);
      
      // å¼‚æ­¥éªŒè¯ï¼ˆæ”¯æŒæ—¶ï¼‰
      if (field.dataset.validateAsync && typeof fetch !== 'undefined') {
        this.validateFieldAsync(field, errorElement);
      }
      
      return true;
    }
  }
  
  async validateFieldAsync(field, errorElement) {
    const validationUrl = field.dataset.validateAsync;
    
    try {
      const response = await fetch(validationUrl, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ value: field.value, field: field.name })
      });
      
      const result = await response.json();
      
      if (!result.valid) {
        this.showError(field, errorElement, result.message);
        field.setCustomValidity(result.message);
      } else {
        field.setCustomValidity('');
      }
    } catch (error) {
      console.warn('å¼‚æ­¥éªŒè¯å¤±è´¥:', error);
      // å¤±è´¥ä¸å½±å“è¡¨å•æäº¤
    }
  }
  
  enhanceValidationUI() {
    // æ·»åŠ éªŒè¯æ ·å¼ç±»
    this.fields.forEach(field => {
      const container = field.closest('.form-group');
      
      field.addEventListener('invalid', () => {
        container.classList.add('invalid');
      });
      
      field.addEventListener('input', () => {
        if (field.validity.valid) {
          container.classList.remove('invalid');
          container.classList.add('valid');
        } else {
          container.classList.remove('valid');
        }
      });
    });
  }
  
  showError(field, errorElement, customMessage) {
    let message = customMessage;
    
    if (!message) {
      if (field.validity.valueMissing) {
        message = 'æ­¤å­—æ®µä¸ºå¿…å¡«é¡¹';
      } else if (field.validity.typeMismatch) {
        if (field.type === 'email') {
          message = 'è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€';
        }
      } else if (field.validity.patternMismatch) {
        message = field.title || 'æ ¼å¼ä¸æ­£ç¡®';
      }
    }
    
    if (errorElement && message) {
      errorElement.textContent = message;
      errorElement.hidden = false;
      field.setAttribute('aria-invalid', 'true');
    }
  }
  
  clearError(errorElement) {
    if (errorElement) {
      errorElement.textContent = '';
      errorElement.hidden = true;
    }
  }
  
  debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
      const later = () => {
        clearTimeout(timeout);
        func(...args);
      };
      clearTimeout(timeout);
      timeout = setTimeout(later, wait);
    };
  }
}

// åˆå§‹åŒ–è¡¨å•å¢å¼º
document.addEventListener('DOMContentLoaded', () => {
  const forms = document.querySelectorAll('.progressive-form');
  forms.forEach(form => new FormEnhancer(form));
});
```

8. PWA ä¸ç¦»çº¿ä½“éªŒå¢å¼º

8.1 Service Worker æ¸è¿›æ³¨å†Œ

```javascript
// æ¸è¿›å¼ Service Worker æ³¨å†Œç­–ç•¥
class ProgressiveSW {
  constructor() {
    this.registration = null;
    this.isSupported = 'serviceWorker' in navigator;
  }
  
  async register() {
    if (!this.isSupported) {
      console.log('å½“å‰ç¯å¢ƒä¸æ”¯æŒ Service Worker');
      return false;
    }
    
    try {
      // ç­‰å¾…é¡µé¢åŠ è½½å®Œæˆï¼Œé¿å…å½±å“å…³é”®æ¸²æŸ“è·¯å¾„
      if (document.readyState !== 'complete') {
        await new Promise(resolve => {
          window.addEventListener('load', resolve, { once: true });
        });
      }
      
      // æ³¨å†Œ Service Worker
      this.registration = await navigator.serviceWorker.register('/sw.js', {
        scope: '/',
        // æ ¹æ®è®¾å¤‡èƒ½åŠ›è°ƒæ•´æ›´æ–°æ£€æŸ¥é¢‘ç‡
        updateViaCache: 'none'
      });
      
      console.log('Service Worker æ³¨å†ŒæˆåŠŸ');
      
      // ç›‘å¬æ›´æ–°
      this.setupUpdateHandling();
      
      // æ ¹æ®ç½‘ç»œçŠ¶å†µè°ƒæ•´ç­–ç•¥
      this.adaptToNetworkConditions();
      
      return true;
    } catch (error) {
      console.log('Service Worker æ³¨å†Œå¤±è´¥:', error);
      // ä¸å½±å“ä¸»è¦åŠŸèƒ½
      return false;
    }
  }
  
  setupUpdateHandling() {
    // ç›‘å¬æ–°ç‰ˆæœ¬
    this.registration.addEventListener('updatefound', () => {
      const newWorker = this.registration.installing;
      
      newWorker.addEventListener('statechange', () => {
        if (newWorker.state === 'installed') {
          if (navigator.serviceWorker.controller) {
            // æ–°ç‰ˆæœ¬å¯ç”¨ï¼Œæç¤ºç”¨æˆ·æ›´æ–°
            this.showUpdateNotification();
          } else {
            // é¦–æ¬¡å®‰è£…æˆåŠŸ
            console.log('å†…å®¹å·²ç¼“å­˜ï¼Œæ”¯æŒç¦»çº¿è®¿é—®');
          }
        }
      });
    });
    
    // å®šæœŸæ£€æŸ¥æ›´æ–°
    if (this.registration.active) {
      setInterval(() => {
        this.registration.update();
      }, 60 * 60 * 1000); // æ¯å°æ—¶æ£€æŸ¥ä¸€æ¬¡
    }
  }
  
  showUpdateNotification() {
    // æ ¹æ®ç”¨æˆ·åå¥½é€‰æ‹©æç¤ºæ–¹å¼
    if ('Notification' in window && Notification.permission === 'granted') {
      const notification = new Notification('æ–°ç‰ˆæœ¬å¯ç”¨', {
        body: 'ç‚¹å‡»åˆ·æ–°é¡µé¢ä»¥ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬',
        icon: '/icon-192.png',
        tag: 'sw-update'
      });
      
      notification.onclick = () => {
        window.location.reload();
      };
    } else {
      // ä½¿ç”¨è‡ªå®šä¹‰UIæç¤º
      this.showUpdateToast();
    }
  }
  
  adaptToNetworkConditions() {
    // æ ¹æ®ç½‘ç»œçŠ¶å†µè°ƒæ•´ç­–ç•¥
    if ('connection' in navigator) {
      const connection = navigator.connection;
      
      // èŠ‚æµæ¨¡å¼ï¼šå‡å°‘ç¼“å­˜å†…å®¹
      if (connection.saveData) {
        this.enableLiteMode();
      }
      
      // æ…¢é€Ÿç½‘ç»œï¼šä¼˜å…ˆç¼“å­˜æ ¸å¿ƒèµ„æº
      if (connection.effectiveType === 'slow-2g' || 
          connection.effectiveType === '2g') {
        this.prioritizeCriticalResources();
      }
    }
  }
  
  enableLiteMode() {
    // é€šçŸ¥ Service Worker å¯ç”¨ç²¾ç®€æ¨¡å¼
    if (this.registration.active) {
      this.registration.active.postMessage({
        type: 'ENABLE_LITE_MODE'
      });
    }
  }
  
  static async unregisterOldSWs() {
    // æ¸…ç†æ—§ç‰ˆ Service Worker
    if ('serviceWorker' in navigator) {
      const registrations = await navigator.serviceWorker.getRegistrations();
      
      registrations.forEach(registration => {
        if (registration.scope !== window.location.origin + '/') {
          registration.unregister();
        }
      });
    }
  }
}

// åº”ç”¨åˆå§‹åŒ–
document.addEventListener('DOMContentLoaded', async () => {
  const swManager = new ProgressiveSW();
  
  // æ ¹æ®è®¾å¤‡èƒ½åŠ›å†³å®šæ˜¯å¦æ³¨å†Œ
  const shouldRegister = await swManager.shouldRegister();
  
  if (shouldRegister) {
    await swManager.register();
  }
  
  // æ¸…ç†æ—§ç‰ˆæœ¬
  ProgressiveSW.unregisterOldSWs();
});
```

8.2 ç¦»çº¿åŠŸèƒ½æ£€æµ‹ä¸å¤„ç†

```javascript
// ç¦»çº¿åŠŸèƒ½æ”¯æŒæ£€æµ‹ä¸å¤„ç†
class OfflineSupport {
  static init() {
    if (!this.isSupported()) {
      this.setupBasicOffline();
      return;
    }
    
    this.enableAdvancedOffline();
    this.setupNetworkDetection();
    this.setupOfflineUI();
  }
  
  static isSupported() {
    return 'serviceWorker' in navigator && 'caches' in window;
  }
  
  static setupBasicOffline() {
    // åŸºç¡€ç¦»çº¿æ£€æµ‹ï¼šä»…æ˜¾ç¤ºç¦»çº¿çŠ¶æ€
    if ('onLine' in navigator) {
      this.updateOnlineStatus();
      
      window.addEventListener('online', this.updateOnlineStatus);
      window.addEventListener('offline', this.updateOnlineStatus);
    }
  }
  
  static enableAdvancedOffline() {
    // é«˜çº§ç¦»çº¿åŠŸèƒ½
    this.setupBackgroundSync();
    this.setupPeriodicSync();
    this.setupOfflineStorage();
  }
  
  static setupNetworkDetection() {
    // ä½¿ç”¨Network Information APIè·å–æ›´è¯¦ç»†çš„ç½‘ç»œä¿¡æ¯
    if ('connection' in navigator) {
      const connection = navigator.connection;
      
      connection.addEventListener('change', () => {
        this.onNetworkChange({
          effectiveType: connection.effectiveType,
          downlink: connection.downlink,
          rtt: connection.rtt,
          saveData: connection.saveData
        });
      });
    }
  }
  
  static setupOfflineUI() {
    // åˆ›å»ºç¦»çº¿UIå…ƒç´ 
    this.createOfflineIndicator();
    this.createOfflineQueueUI();
    
    // ç¦»çº¿å†…å®¹å¯ç”¨æ€§æ£€æŸ¥
    this.checkOfflineContent();
  }
  
  static createOfflineIndicator() {
    const indicator = document.createElement('div');
    indicator.id = 'offline-indicator';
    indicator.className = 'offline-indicator hidden';
    indicator.setAttribute('aria-live', 'polite');
    indicator.innerHTML = `
      <span class="offline-icon" aria-hidden="true">ğŸ“¶</span>
      <span class="offline-text">æ‚¨å½“å‰å¤„äºç¦»çº¿çŠ¶æ€</span>
      <button class="offline-retry" hidden>é‡è¯•</button>
    `;
    
    document.body.appendChild(indicator);
    
    // æ ¹æ®ç½‘ç»œçŠ¶æ€æ›´æ–°
    this.updateOfflineIndicator();
  }
  
  static updateOnlineStatus() {
    const isOnline = navigator.onLine;
    const html = document.documentElement;
    
    if (isOnline) {
      html.classList.remove('offline');
      html.classList.add('online');
      
      // å°è¯•åŒæ­¥ç¦»çº¿æ•°æ®
      this.syncOfflineData();
    } else {
      html.classList.remove('online');
      html.classList.add('offline');
      
      // æ˜¾ç¤ºç¦»çº¿æç¤º
      this.showOfflineNotice();
    }
  }
  
  static async syncOfflineData() {
    // åŒæ­¥ç¦»çº¿æœŸé—´çš„æ“ä½œ
    if ('serviceWorker' in navigator && navigator.serviceWorker.controller) {
      try {
        // å‘é€åŒæ­¥æ¶ˆæ¯
        const result = await navigator.serviceWorker.ready;
        
        if ('sync' in result) {
          await result.sync.register('offline-data');
        }
      } catch (error) {
        console.log('æ•°æ®åŒæ­¥å¤±è´¥:', error);
      }
    }
  }
  
  static async checkOfflineContent() {
    // æ£€æŸ¥æ ¸å¿ƒå†…å®¹æ˜¯å¦å·²ç¼“å­˜
    const criticalUrls = [
      '/',
      '/styles/core.css',
      '/scripts/core.js',
      '/offline.html'
    ];
    
    if ('caches' in window) {
      try {
        const cache = await caches.open('core-content');
        const requests = criticalUrls.map(url => cache.match(url));
        const responses = await Promise.all(requests);
        
        const allCached = responses.every(r => r !== undefined);
        
        if (allCached) {
          document.documentElement.classList.add('offline-ready');
        }
      } catch (error) {
        console.log('ç¼“å­˜æ£€æŸ¥å¤±è´¥:', error);
      }
    }
  }
  
  static showOfflineNotice() {
    // æ˜¾ç¤ºç¦»çº¿é€šçŸ¥
    if ('Notification' in window && Notification.permission === 'granted') {
      const notification = new Notification('è¿›å…¥ç¦»çº¿æ¨¡å¼', {
        body: 'éƒ¨åˆ†åŠŸèƒ½å¯èƒ½å—é™ï¼Œå·²ä¿å­˜çš„æ“ä½œå°†åœ¨æ¢å¤è¿æ¥ååŒæ­¥',
        icon: '/icon-192.png',
        tag: 'offline-notice'
      });
      
      setTimeout(() => notification.close(), 5000);
    }
  }
}

// åˆå§‹åŒ–ç¦»çº¿æ”¯æŒ
document.addEventListener('DOMContentLoaded', () => {
  OfflineSupport.init();
});
```

9. æ€§èƒ½æœ€ä½³å®è·µ

9.1 æ ¸å¿ƒç½‘é¡µæŒ‡æ ‡ä¼˜åŒ–

```javascript
// æ€§èƒ½ç›‘æ§ä¸ä¼˜åŒ–
class PerformanceMonitor {
  static init() {
    if (!('performance' in window) || !('PerformanceObserver' in window)) {
      return; // ä¸æ”¯æŒæ€§èƒ½API
    }
    
    this.targets = {
      LCP: 2500,    // æœ€å¤§å†…å®¹ç»˜åˆ¶ < 2.5ç§’
      FID: 100,     // é¦–æ¬¡è¾“å…¥å»¶è¿Ÿ < 100æ¯«ç§’
      CLS: 0.1,     // ç´¯ç§¯å¸ƒå±€åç§» < 0.1
      TTI: 5000,    // å¯äº¤äº’æ—¶é—´ < 5ç§’ï¼ˆ3Gç½‘ç»œï¼‰
      FCP: 1800     // é¦–æ¬¡å†…å®¹ç»˜åˆ¶ < 1.8ç§’
    };
    
    this.metrics = {};
    this.setupMonitoring();
    this.setupPerformanceBudget();
  }
  
  static setupMonitoring() {
    // ç›‘æ§ LCP
    this.monitorLCP();
    
    // ç›‘æ§ FIDï¼ˆä½¿ç”¨Event Timing APIï¼‰
    this.monitorFID();
    
    // ç›‘æ§ CLS
    this.monitorCLS();
    
    // ç›‘æ§ FCP
    this.monitorFCP();
    
    // ç›‘æ§èµ„æºåŠ è½½
    this.monitorResources();
    
    // ç›‘æ§é•¿ä»»åŠ¡
    this.monitorLongTasks();
  }
  
  static monitorLCP() {
    const observer = new PerformanceObserver((list) => {
      const entries = list.getEntries();
      const lastEntry = entries[entries.length - 1];
      
      this.metrics.LCP = lastEntry.startTime;
      
      if (lastEntry.startTime < this.targets.LCP) {
        console.log('âœ… LCP è¾¾æ ‡:', lastEntry.startTime.toFixed(0), 'ms');
      } else {
        console.warn('âš ï¸ LCP æœªè¾¾æ ‡:', lastEntry.startTime.toFixed(0), 'ms');
        this.triggerOptimization('LCP');
      }
    });
    
    observer.observe({ entryTypes: ['largest-contentful-paint'] });
  }
  
  static monitorCLS() {
    let clsValue = 0;
    let sessionEntries = [];
    
    const observer = new PerformanceObserver((list) => {
      for (const entry of list.getEntries()) {
        // åªè®¡ç®—æ²¡æœ‰ç”¨æˆ·è¾“å…¥çš„å¸ƒå±€åç§»
        if (!entry.hadRecentInput) {
          sessionEntries.push(entry);
          clsValue += entry.value;
        }
      }
      
      this.metrics.CLS = clsValue;
      
      if (clsValue < this.targets.CLS) {
        console.log('âœ… CLS è¾¾æ ‡:', clsValue.toFixed(3));
      } else {
        console.warn('âš ï¸ CLS æœªè¾¾æ ‡:', clsValue.toFixed(3));
        this.logCLSDetails(sessionEntries);
        this.triggerOptimization('CLS');
      }
    });
    
    observer.observe({ type: 'layout-shift', buffered: true });
    
    // é¡µé¢éšè—æ—¶æŠ¥å‘Šæœ€ç»ˆCLS
    document.addEventListener('visibilitychange', () => {
      if (document.visibilityState === 'hidden') {
        observer.takeRecords();
      }
    });
  }
  
  static monitorResources() {
    const observer = new PerformanceObserver((list) => {
      const resources = list.getEntries();
      
      // åˆ†æå…³é”®èµ„æº
      const criticalResources = resources.filter(resource => {
        return resource.initiatorType === 'link' || 
               resource.initiatorType === 'script' ||
               (resource.initiatorType === 'img' && this.isAboveTheFold(resource));
      });
      
      // æ£€æŸ¥èµ„æºå¤§å°å’ŒåŠ è½½æ—¶é—´
      criticalResources.forEach(resource => {
        if (resource.transferSize > 1024 * 100) { // å¤§äº100KB
          console.warn('âš ï¸ å¤§èµ„æº:', resource.name, 
                      `${(resource.transferSize / 1024).toFixed(1)}KB`);
        }
      });
    });
    
    observer.observe({ entryTypes: ['resource'] });
  }
  
  static isAboveTheFold(resource) {
    // ç®€å•åˆ¤æ–­èµ„æºæ˜¯å¦åœ¨é¦–å±
    if (resource.initiatorType === 'img') {
      const img = document.querySelector(`[src="${resource.name}"]`);
      if (img) {
        const rect = img.getBoundingClientRect();
        return rect.top < window.innerHeight;
      }
    }
    return false;
  }
  
  static triggerOptimization(metric) {
    // æ ¹æ®æœªè¾¾æ ‡çš„æŒ‡æ ‡è§¦å‘ä¼˜åŒ–
    switch (metric) {
      case 'LCP':
        this.optimizeLCP();
        break;
      case 'CLS':
        this.optimizeCLS();
        break;
      case 'FID':
        this.optimizeFID();
        break;
    }
  }
  
  static optimizeLCP() {
    // LCPä¼˜åŒ–ç­–ç•¥
    console.log('åº”ç”¨LCPä¼˜åŒ–ç­–ç•¥...');
    
    // 1. é¢„åŠ è½½LCPå…ƒç´ 
    const lcpElement = this.identifyLCPElement();
    if (lcpElement) {
      this.preloadLCPElement(lcpElement);
    }
    
    // 2. ç§»é™¤é˜»å¡æ¸²æŸ“çš„èµ„æº
    this.removeRenderBlocking();
    
    // 3. ä¼˜åŒ–æœåŠ¡å™¨å“åº”æ—¶é—´
    this.enableCaching();
  }
  
  static optimizeCLS() {
    // CLSä¼˜åŒ–ç­–ç•¥
    console.log('åº”ç”¨CLSä¼˜åŒ–ç­–ç•¥...');
    
    // 1. ä¸ºåª’ä½“å…ƒç´ æŒ‡å®šå°ºå¯¸
    this.addDimensionsToMedia();
    
    // 2. é¢„ç•™å¹¿å‘Šä½ç©ºé—´
    this.reserveAdSpace();
    
    // 3. é¿å…åŠ¨æ€æ’å…¥å†…å®¹
    this.stabilizeDynamicContent();
  }
  
  static setupPerformanceBudget() {
    // æ€§èƒ½é¢„ç®—æ£€æŸ¥
    const budget = {
      pageWeight: 1024 * 1024, // 1MB
      maxRequests: 50,
      maxImages: 20,
      maxFonts: 2
    };
    
    // åœ¨å¼€å‘é˜¶æ®µæ£€æŸ¥
    if (process.env.NODE_ENV === 'development') {
      this.checkPerformanceBudget(budget);
    }
  }
  
  static checkPerformanceBudget(budget) {
    const resources = performance.getEntriesByType('resource');
    
    // æ£€æŸ¥é¡µé¢æ€»å¤§å°
    const totalSize = resources.reduce((sum, resource) => 
      sum + (resource.transferSize || 0), 0);
    
    if (totalSize > budget.pageWeight) {
      console.warn(`âš ï¸ é¡µé¢å¤§å°è¶…å‡ºé¢„ç®—: ${(totalSize / 1024 / 1024).toFixed(2)}MB`);
    }
    
    // æ£€æŸ¥è¯·æ±‚æ•°é‡
    const requestCount = resources.length;
    if (requestCount > budget.maxRequests) {
      console.warn(`âš ï¸ è¯·æ±‚æ•°é‡è¿‡å¤š: ${requestCount}`);
    }
  }
}

// åˆå§‹åŒ–æ€§èƒ½ç›‘æ§
document.addEventListener('DOMContentLoaded', () => {
  // ç­‰å¾…å…³é”®èµ„æºåŠ è½½åå¼€å§‹ç›‘æ§
  window.addEventListener('load', () => {
    setTimeout(() => PerformanceMonitor.init(), 0);
  });
});
```

9.2 èµ„æºåŠ è½½ç­–ç•¥

```html
<!-- æ™ºèƒ½èµ„æºåŠ è½½ç¤ºä¾‹ -->
<head>
  <!-- 1. é¢„åŠ è½½å…³é”®èµ„æº -->
  <link rel="preload" href="critical-font.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="hero-image.webp" as="image" type="image/webp" media="(min-width: 800px)">
  <link rel="preload" href="core.js" as="script">
  
  <!-- 2. é¢„è¿æ¥å…³é”®åŸŸå -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="dns-prefetch" href="https://api.example.com">
  
  <!-- 3. å…³é”®CSSï¼ˆå†…è”æˆ–å¿«é€ŸåŠ è½½ï¼‰ -->
  <style>
    /* å†…è”å…³é”®CSS */
    :root { --primary: #0066cc; }
    .header { height: 60px; }
    .hero { min-height: 400px; }
  </style>
  
  <!-- æˆ–å¤–éƒ¨åŠ è½½ä½†é«˜ä¼˜å…ˆçº§ -->
  <link rel="stylesheet" href="critical.css" media="all">
  
  <!-- 4. éå…³é”®CSSå¼‚æ­¥åŠ è½½ -->
  <link rel="preload" href="non-critical.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="non-critical.css"></noscript>
  
  <!-- 5. è„šæœ¬ç­–ç•¥ -->
  <!-- æ ¸å¿ƒåŠŸèƒ½ï¼šdefer -->
  <script src="core.js" defer></script>
  
  <!-- ç°ä»£æµè§ˆå™¨ï¼šESæ¨¡å— -->
  <script type="module" src="modern.js"></script>
  
  <!-- ä¼ ç»Ÿæµè§ˆå™¨ï¼šnomoduleå›é€€ -->
  <script nomodule src="legacy.js" defer></script>
  
  <!-- ç¬¬ä¸‰æ–¹è„šæœ¬ï¼šasyncæˆ–å»¶è¿ŸåŠ è½½ -->
  <script src="analytics.js" async defer></script>
</head>
```

9.3 å›¾ç‰‡æ‡’åŠ è½½ä¸ä¼˜åŒ–

```javascript
// æ¸è¿›å¢å¼ºçš„æ‡’åŠ è½½
class ProgressiveLazyLoader {
  constructor(options = {}) {
    this.options = {
      rootMargin: '50px 0px',
      threshold: 0.01,
      enableNativeLazyLoad: true,
      ...options
    };
    
    this.observer = null;
    this.observed = new Set();
    this.init();
  }
  
  init() {
    // æ£€æµ‹æµè§ˆå™¨æ”¯æŒæƒ…å†µ
    this.supports = {
      native: 'loading' in HTMLImageElement.prototype,
      intersectionObserver: 'IntersectionObserver' in window
    };
    
    // é€‰æ‹©æœ€ä½³æ‡’åŠ è½½ç­–ç•¥
    if (this.supports.native && this.options.enableNativeLazyLoad) {
      this.setupNativeLazyLoad();
    } else if (this.supports.intersectionObserver) {
      this.setupIntersectionObserver();
    } else {
      this.setupFallbackLazyLoad();
    }
    
    // å¤„ç†åŠ¨æ€æ·»åŠ çš„å†…å®¹
    this.setupMutationObserver();
  }
  
  setupNativeLazyLoad() {
    // ä½¿ç”¨åŸç”Ÿæ‡’åŠ è½½
    console.log('ä½¿ç”¨åŸç”Ÿæ‡’åŠ è½½');
    
    // å°†data-srcè½¬æ¢ä¸ºsrc
    document.querySelectorAll('img[data-src]').forEach(img => {
      if (img.loading === 'lazy') {
        img.src = img.dataset.src;
        img.removeAttribute('data-src');
      }
    });
    
    // ç›‘å¬åŠ è½½äº‹ä»¶
    document.addEventListener('load', (e) => {
      if (e.target.tagName === 'IMG' && e.target.loading === 'lazy') {
        this.onImageLoad(e.target);
      }
    }, true);
  }
  
  setupIntersectionObserver() {
    // ä½¿ç”¨IntersectionObserver
    this.observer = new IntersectionObserver(
      this.onIntersection.bind(this),
      {
        root: null,
        rootMargin: this.options.rootMargin,
        threshold: this.options.threshold
      }
    );
    
    // è§‚å¯Ÿæ‰€æœ‰æ‡’åŠ è½½å›¾ç‰‡
    document.querySelectorAll('img[data-src], [data-bg]').forEach(element => {
      this.observeElement(element);
    });
  }
  
  setupFallbackLazyLoad() {
    // é™çº§æ–¹æ¡ˆï¼šåŸºäºæ»šåŠ¨äº‹ä»¶
    console.log('ä½¿ç”¨æ»šåŠ¨äº‹ä»¶æ‡’åŠ è½½é™çº§æ–¹æ¡ˆ');
    
    this.onScroll = this.throttle(this.checkViewport.bind(this), 100);
    window.addEventListener('scroll', this.onScroll, { passive: true });
    window.addEventListener('resize', this.onScroll, { passive: true });
    
    // åˆå§‹æ£€æŸ¥
    this.checkViewport();
  }
  
  onIntersection(entries) {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const element = entry.target;
        this.loadElement(element);
        this.observer.unobserve(element);
        this.observed.delete(element);
      }
    });
  }
  
  loadElement(element) {
    if (element.tagName === 'IMG' && element.dataset.src) {
      // å›¾ç‰‡å…ƒç´ 
      element.src = element.dataset.src;
      
      // å¯é€‰ï¼šåŠ è½½å®Œæˆåç§»é™¤data-src
      element.addEventListener('load', () => {
        element.removeAttribute('data-src');
        this.onImageLoad(element);
      }, { once: true });
      
      element.addEventListener('error', () => {
        this.onImageError(element);
      }, { once: true });
      
    } else if (element.dataset.bg) {
      // èƒŒæ™¯å›¾ç‰‡
      element.style.backgroundImage = `url(${element.dataset.bg})`;
      element.removeAttribute('data-bg');
    }
  }
  
  checkViewport() {
    const viewportHeight = window.innerHeight;
    const scrollTop = window.scrollY || document.documentElement.scrollTop;
    
    document.querySelectorAll('img[data-src], [data-bg]').forEach(element => {
      if (this.observed.has(element)) return;
      
      const rect = element.getBoundingClientRect();
      const elementTop = rect.top + scrollTop;
      
      // æ£€æŸ¥å…ƒç´ æ˜¯å¦åœ¨è§†å£é™„è¿‘
      if (elementTop < scrollTop + viewportHeight + 100) {
        this.loadElement(element);
        this.observed.add(element);
      }
    });
  }
  
  observeElement(element) {
    if (this.observer && !this.observed.has(element)) {
      this.observer.observe(element);
      this.observed.add(element);
    }
  }
  
  onImageLoad(img) {
    // å›¾ç‰‡åŠ è½½å®Œæˆ
    img.classList.add('loaded');
    
    // å¯é€‰ï¼šæ¨¡ç³Šåˆ°æ¸…æ™°è¿‡æ¸¡
    if (img.dataset.srcset) {
      // å“åº”å¼å›¾ç‰‡åŠ è½½å®Œæˆ
      img.srcset = img.dataset.srcset;
      img.removeAttribute('data-srcset');
    }
  }
  
  onImageError(img) {
    // å›¾ç‰‡åŠ è½½å¤±è´¥å¤„ç†
    console.warn('å›¾ç‰‡åŠ è½½å¤±è´¥:', img.dataset.src);
    
    // æ˜¾ç¤ºå ä½å›¾
    img.src = '/placeholder.jpg';
    img.classList.add('error');
    
    // å¯é€‰ï¼šé‡è¯•æœºåˆ¶
    this.retryImageLoad(img);
  }
  
  setupMutationObserver() {
    // ç›‘å¬DOMå˜åŒ–ï¼Œå¤„ç†åŠ¨æ€æ·»åŠ çš„å†…å®¹
    if ('MutationObserver' in window) {
      this.mutationObserver = new MutationObserver(mutations => {
        mutations.forEach(mutation => {
          mutation.addedNodes.forEach(node => {
            if (node.nodeType === 1) { // å…ƒç´ èŠ‚ç‚¹
              const lazyElements = node.querySelectorAll
                ? node.querySelectorAll('img[data-src], [data-bg]')
                : [];
              
              lazyElements.forEach(element => {
                this.observeElement(element);
              });
              
              // å¦‚æœæ˜¯å›¾ç‰‡å…ƒç´ æœ¬èº«
              if (node.matches('img[data-src], [data-bg]')) {
                this.observeElement(node);
              }
            }
          });
        });
      });
      
      this.mutationObserver.observe(document.body, {
        childList: true,
        subtree: true
      });
    }
  }
  
  throttle(func, limit) {
    let inThrottle;
    return function() {
      const args = arguments;
      const context = this;
      if (!inThrottle) {
        func.apply(context, args);
        inThrottle = true;
        setTimeout(() => inThrottle = false, limit);
      }
    };
  }
  
  destroy() {
    if (this.observer) {
      this.observer.disconnect();
    }
    
    if (this.mutationObserver) {
      this.mutationObserver.disconnect();
    }
    
    if (this.onScroll) {
      window.removeEventListener('scroll', this.onScroll);
      window.removeEventListener('resize', this.onScroll);
    }
    
    this.observed.clear();
  }
}

// åˆå§‹åŒ–æ‡’åŠ è½½
document.addEventListener('DOMContentLoaded', () => {
  window.lazyLoader = new ProgressiveLazyLoader();
});
```

10. å…¼å®¹æ€§æ£€æŸ¥æ¸…å•

10.1 åŸºç¡€å…¼å®¹æ€§æ¸…å•ï¼ˆå¿…é¡»æ»¡è¶³ï¼‰

Â· æ–‡æ¡£ä½¿ç”¨ <!DOCTYPE html>
Â· æŒ‡å®šæ­£ç¡®çš„ lang å±æ€§ï¼ˆå¦‚ zh-CNï¼‰
Â· è®¾ç½® UTF-8 å­—ç¬¦ç¼–ç 
Â· é…ç½®ç§»åŠ¨ç«¯ viewport
Â· æä¾›æœ‰æ„ä¹‰çš„é¡µé¢æ ‡é¢˜
Â· é¡µé¢åœ¨æ—  CSS æƒ…å†µä¸‹å¯è¯»
Â· é¡µé¢åœ¨æ—  JavaScript æƒ…å†µä¸‹å¯ç”¨
Â· æ ¸å¿ƒå†…å®¹åœ¨æ—§æµè§ˆå™¨ä¸­å¯è®¿é—®
Â· è¡¨å•åœ¨æ—  JavaScript æ—¶å¯æäº¤
Â· å›¾ç‰‡æœ‰é€‚å½“çš„æ›¿ä»£æ–‡æœ¬

10.2 è¯­ä¹‰åŒ–ä¸å¯è®¿é—®æ€§æ¸…å•

Â· ä½¿ç”¨æ­£ç¡®çš„æ ‡é¢˜å±‚çº§ï¼ˆh1-h6ï¼‰
Â· ä¼˜å…ˆä½¿ç”¨è¯­ä¹‰åŒ–å…ƒç´ ï¼ˆmainã€navã€articleç­‰ï¼‰
Â· ä¸ºå›¾åƒæä¾›æœ‰æ„ä¹‰çš„ alt æ–‡æœ¬
Â· è¡¨å•æ§ä»¶æœ‰å…³è”çš„ label
Â· ç¡®ä¿è¶³å¤Ÿçš„é¢œè‰²å¯¹æ¯”åº¦ï¼ˆ4.5:1 ä»¥ä¸Šï¼‰
Â· æ”¯æŒé”®ç›˜å¯¼èˆªï¼ˆTab é”®é¡ºåºåˆç†ï¼‰
Â· æä¾›è·³è¿‡é“¾æ¥ï¼ˆSkip to Contentï¼‰
Â· ä½¿ç”¨ ARIA å±æ€§å¢å¼ºå¤æ‚ç»„ä»¶
Â· ç„¦ç‚¹æŒ‡ç¤ºå™¨å¯è§ä¸”æ¸…æ™°
Â· é”™è¯¯ä¿¡æ¯æ¸…æ™°ä¸”å…³è”åˆ°ç›¸åº”å­—æ®µ

10.3 æ€§èƒ½ä¸ä½“éªŒæ¸…å•

Â· LCP < 2.5 ç§’
Â· FID < 100 æ¯«ç§’
Â· CLS < 0.1
Â· å¯äº¤äº’æ—¶é—´ < 5 ç§’ï¼ˆ3G ç½‘ç»œï¼‰
Â· æ”¯æŒç¦»çº¿è®¿é—®æ ¸å¿ƒå†…å®¹
Â· å­—ä½“åŠ è½½ä¸é˜»å¡æ¸²æŸ“
Â· å›¾ç‰‡å°ºå¯¸é€‚å½“ï¼ŒåŠ è½½ä¼˜åŒ–
Â· å…³é”®èµ„æºé¢„åŠ è½½/é¢„è¿æ¥
Â· éå…³é”®èµ„æºå»¶è¿ŸåŠ è½½
Â· æœ‰æ•ˆä½¿ç”¨æµè§ˆå™¨ç¼“å­˜

10.4 æ¸è¿›å¢å¼ºæ ¸å¿ƒæ¸…å•

Â· åŸºäºåŠŸèƒ½æ£€æµ‹è€Œéæµè§ˆå™¨æ£€æµ‹
Â· ä½¿ç”¨ @supports è¿›è¡Œ CSS ç‰¹æ€§æŸ¥è¯¢
Â· ä¸º JavaScript åŠŸèƒ½æä¾›é™çº§æ–¹æ¡ˆ
Â· æ ¸å¿ƒåŠŸèƒ½ä¸ä¾èµ–ç°ä»£ API
Â· å¢å¼ºåŠŸèƒ½ä¼˜é›…é™çº§
Â· æ”¯æŒæ…¢é€Ÿç½‘ç»œå’Œä½æ€§èƒ½è®¾å¤‡
Â· æµ‹è¯•æ—  CSSã€æ—  JavaScript åœºæ™¯
Â· æä¾›é€‚å½“çš„ noscript å†…å®¹
Â· ä½¿ç”¨æ¸è¿›å¼å›¾ç‰‡åŠ è½½
Â· é‡è¦æ“ä½œæœ‰ç¦»çº¿æ”¯æŒ

11. å®ç”¨å·¥å…·å‡½æ•°

11.1 å…¼å®¹æ€§æ£€æµ‹å·¥å…·

```javascript
// å…¼å®¹æ€§å·¥å…·é›†åˆ
class CompatibilityUtils {
  // æ£€æµ‹CSSç‰¹æ€§æ”¯æŒ
  static supportsCSS(feature, value) {
    if (typeof CSS !== 'undefined' && CSS.supports) {
      if (value) {
        return CSS.supports(feature, value);
      } else {
        return CSS.supports(feature);
      }
    }
    
    // é™çº§æ£€æµ‹æ–¹æ³•
    return this.cssFallbackDetection(feature, value);
  }
  
  static cssFallbackDetection(feature, value) {
    // åˆ›å»ºæµ‹è¯•å…ƒç´ 
    const testEl = document.createElement('div');
    
    // å¸¸è§ç‰¹æ€§æ£€æµ‹
    const tests = {
      'display': () => {
        testEl.style.display = value;
        return testEl.style.display === value;
      },
      'position': () => {
        testEl.style.position = value;
        return testEl.style.position === value;
      },
      'grid': () => {
        testEl.style.display = 'grid';
        return testEl.style.display === 'grid';
      },
      'flex': () => {
        testEl.style.display = 'flex';
        return testEl.style.display === 'flex';
      }
    };
    
    return tests[feature] ? tests[feature]() : false;
  }
  
  // æ£€æµ‹JavaScript APIæ”¯æŒ
  static supportsJS(apiPath) {
    const path = apiPath.split('.');
    let obj = window;
    
    for (const key of path) {
      if (obj[key] === undefined) return false;
      obj = obj[key];
    }
    return true;
  }
  
  // æŒ‰éœ€åŠ è½½polyfill
  static async loadPolyfill(polyfillName, condition, options = {}) {
    // æ£€æŸ¥æ˜¯å¦æ»¡è¶³æ¡ä»¶
    if (!condition()) {
      return Promise.resolve();
    }
    
    // æ£€æŸ¥æ˜¯å¦å·²åŠ è½½
    if (window.loadedPolyfills && window.loadedPolyfills[polyfillName]) {
      return Promise.resolve();
    }
    
    return new Promise((resolve, reject) => {
      const script = document.createElement('script');
      
      // æ ¹æ®ç¯å¢ƒé€‰æ‹©polyfillç‰ˆæœ¬
      const version = options.version || 'latest';
      const src = options.cdn 
        ? `${options.cdn}/${polyfillName}.min.js`
        : `/polyfills/${polyfillName}.js`;
      
      script.src = src;
      script.async = true;
      
      script.onload = () => {
        if (!window.loadedPolyfills) window.loadedPolyfills = {};
        window.loadedPolyfills[polyfillName] = true;
        console.log(`Polyfill ${polyfillName} åŠ è½½æˆåŠŸ`);
        resolve();
      };
      
      script.onerror = () => {
        console.error(`Polyfill ${polyfillName} åŠ è½½å¤±è´¥`);
        reject(new Error(`Failed to load polyfill: ${polyfillName}`));
      };
      
      // æ’å…¥åˆ°headä¸­
      document.head.appendChild(script);
    });
  }
  
  // æ‰¹é‡æ£€æµ‹
  static detectFeatures(featureList) {
    return featureList.reduce((result, feature) => {
      if (feature.type === 'css') {
        result[feature.name] = this.supportsCSS(feature.name, feature.value);
      } else if (feature.type === 'js') {
        result[feature.name] = this.supportsJS(feature.name);
      }
      return result;
    }, {});
  }
}

// å¸¸ç”¨polyfillåŠ è½½é…ç½®
const polyfillConfigs = {
  'fetch': {
    condition: () => typeof fetch === 'undefined',
    cdn: 'https://cdn.polyfill.io/v3/polyfill.min.js?features=fetch'
  },
  'intersection-observer': {
    condition: () => !('IntersectionObserver' in window),
    cdn: 'https://polyfill.io/v3/polyfill.min.js?features=IntersectionObserver'
  },
  'css-variables': {
    condition: () => !CSS.supports('--test', 'value'),
    cdn: 'https://cdn.jsdelivr.net/npm/css-vars-ponyfill@2'
  }
};

// æŒ‰éœ€åŠ è½½polyfill
async function loadRequiredPolyfills() {
  const polyfills = [];
  
  // æ£€æµ‹éœ€è¦å“ªäº›polyfill
  for (const [name, config] of Object.entries(polyfillConfigs)) {
    if (config.condition()) {
      polyfills.push(CompatibilityUtils.loadPolyfill(name, () => true, config));
    }
  }
  
  // å¹¶è¡ŒåŠ è½½æ‰€æœ‰éœ€è¦çš„polyfill
  await Promise.allSettled(polyfills);
}
```

11.2 ç¯å¢ƒæ£€æµ‹ä¸é€‚é…

```javascript
// ç¯å¢ƒç‰¹æ€§æ£€æµ‹ä¸é€‚é…
class EnvironmentDetector {
  static getInfo() {
    return {
      // ç½‘ç»œä¿¡æ¯
      network: this.getNetworkInfo(),
      
      // è®¾å¤‡èƒ½åŠ›
      capabilities: this.getCapabilities(),
      
      // æ€§èƒ½æŒ‡æ ‡
      performance: this.getPerformanceInfo(),
      
      // æµè§ˆå™¨ç‰¹æ€§
      features: this.getBrowserFeatures(),
      
      // ç”¨æˆ·åå¥½
      preferences: this.getUserPreferences()
    };
  }
  
  static getNetworkInfo() {
    const info = {
      online: navigator.onLine,
      connectionType: 'unknown',
      effectiveType: 'unknown',
      downlink: 0,
      rtt: 0,
      saveData: false
    };
    
    if ('connection' in navigator) {
      const connection = navigator.connection;
      
      info.connectionType = connection.type || 'unknown';
      info.effectiveType = connection.effectiveType || 'unknown';
      info.downlink = connection.downlink || 0;
      info.rtt = connection.rtt || 0;
      info.saveData = connection.saveData || false;
    }
    
    return info;
  }
  
  static getCapabilities() {
    return {
      // è¾“å…¥èƒ½åŠ›
      touch: 'ontouchstart' in window,
      pointer: 'onpointerdown' in window,
      hover: window.matchMedia('(hover: hover)').matches,
      
      // è®¾å¤‡ç‰¹æ€§
      serviceWorker: 'serviceWorker' in navigator,
      webGL: !!window.WebGLRenderingContext,
      webGPU: 'gpu' in navigator,
      webXR: 'xr' in navigator,
      
      // å­˜å‚¨èƒ½åŠ›
      localStorage: 'localStorage' in window,
      sessionStorage: 'sessionStorage' in window,
      indexedDB: 'indexedDB' in window,
      
      // åª’ä½“èƒ½åŠ›
      mediaDevices: 'mediaDevices' in navigator,
      getUserMedia: 'getUserMedia' in navigator.mediaDevices,
      webRTC: 'RTCPeerConnection' in window
    };
  }
  
  static getPerformanceInfo() {
    const info = {
      deviceMemory: navigator.deviceMemory || 0,
      hardwareConcurrency: navigator.hardwareConcurrency || 0,
      maxTouchPoints: navigator.maxTouchPoints || 0
    };
    
    // æ€§èƒ½APIä¿¡æ¯
    if ('performance' in window) {
      info.memory = performance.memory;
      info.timing = performance.timing;
      
      // è®¡ç®—é¡µé¢åŠ è½½æ—¶é—´
      if (performance.timing) {
        info.pageLoadTime = performance.timing.loadEventEnd - 
                          performance.timing.navigationStart;
      }
    }
    
    return info;
  }
  
  static getBrowserFeatures() {
    return {
      // CSSç‰¹æ€§
      css: {
        grid: CSS.supports('display', 'grid'),
        flex: CSS.supports('display', 'flex'),
        variables: CSS.supports('--test', 'value'),
        containerQueries: CSS.supports('container-type', 'inline-size'),
        subgrid: CSS.supports('display', 'subgrid'),
        backdropFilter: CSS.supports('backdrop-filter', 'blur(10px)')
      },
      
      // JavaScript API
      js: {
        promises: typeof Promise !== 'undefined',
        asyncAwait: async function() {}.constructor.name === 'AsyncFunction',
        fetch: typeof fetch !== 'undefined',
        modules: 'noModule' in HTMLScriptElement.prototype,
        workers: 'Worker' in window,
        sharedWorkers: 'SharedWorker' in window,
        broadcastChannel: 'BroadcastChannel' in window
      },
      
      // Web API
      web: {
        intersectionObserver: 'IntersectionObserver' in window,
        resizeObserver: 'ResizeObserver' in window,
        mutationObserver: 'MutationObserver' in window,
        paymentRequest: 'PaymentRequest' in window,
        credentials: 'credentials' in navigator,
        clipboard: 'clipboard' in navigator
      }
    };
  }
  
  static getUserPreferences() {
    const preferences = {
      // é¢œè‰²ä¸»é¢˜åå¥½
      prefersColorScheme: this.getColorSchemePreference(),
      
      // è¿åŠ¨åå¥½
      prefersReducedMotion: this.getMotionPreference(),
      
      // å¯¹æ¯”åº¦åå¥½
      prefersContrast: this.getContrastPreference(),
      
      // æ•°æ®èŠ‚çœæ¨¡å¼
      prefersReducedData: this.getDataPreference(),
      
      // é€æ˜åº¦åå¥½
      prefersTransparency: this.getTransparencyPreference()
    };
    
    // ä»localStorageè¯»å–ç”¨æˆ·è®¾ç½®
    try {
      if (localStorage.getItem('userPreferences')) {
        const saved = JSON.parse(localStorage.getItem('userPreferences'));
        Object.assign(preferences, saved);
      }
    } catch (error) {
      console.warn('æ— æ³•è¯»å–ç”¨æˆ·åå¥½è®¾ç½®:', error);
    }
    
    return preferences;
  }
  
  static getColorSchemePreference() {
    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
      return 'dark';
    } else if (window.matchMedia('(prefers-color-scheme: light)').matches) {
      return 'light';
    }
    return 'no-preference';
  }
  
  static getMotionPreference() {
    return window.matchMedia('(prefers-reduced-motion: reduce)').matches 
      ? 'reduce' 
      : 'no-preference';
  }
  
  static adaptToEnvironment() {
    const env = this.getInfo();
    const html = document.documentElement;
    
    // è®¾ç½®ç¯å¢ƒç±»å
    html.classList.add(`network-${env.network.effectiveType}`);
    html.classList.add(`device-memory-${Math.min(4, Math.floor(env.performance.deviceMemory))}`);
    html.classList.add(`touch-${env.capabilities.touch ? 'yes' : 'no'}`);
    
    // åº”ç”¨ç”¨æˆ·åå¥½
    if (env.preferences.prefersReducedMotion === 'reduce') {
      html.classList.add('reduced-motion');
    }
    
    if (env.preferences.prefersColorScheme === 'dark') {
      html.classList.add('dark-mode');
    }
    
    // æ ¹æ®ç½‘ç»œçŠ¶å†µè°ƒæ•´ç­–ç•¥
    if (env.network.saveData || env.network.effectiveType === '2g') {
      this.enableDataSaverMode();
    }
    
    // æ ¹æ®è®¾å¤‡å†…å­˜è°ƒæ•´
    if (env.performance.deviceMemory < 2) {
      this.enableLowMemoryMode();
    }
    
    // ä¿å­˜ç¯å¢ƒä¿¡æ¯ä¾›å…¶ä»–æ¨¡å—ä½¿ç”¨
    window.environment = env;
  }
  
  static enableDataSaverMode() {
    console.log('å¯ç”¨æ•°æ®èŠ‚çœæ¨¡å¼');
    
    // å‡å°‘é¢„åŠ è½½
    const prefetches = document.querySelectorAll('link[rel="prefetch"], link[rel="preload"]');
    prefetches.forEach(link => link.remove());
    
    // é™ä½å›¾ç‰‡è´¨é‡
    document.querySelectorAll('img[data-src-low]').forEach(img => {
      img.dataset.src = img.dataset.srcLow;
    });
    
    // ç¦ç”¨éå…³é”®åŠŸèƒ½
    document.documentElement.classList.add('data-saver');
  }
  
  static enableLowMemoryMode() {
    console.log('å¯ç”¨ä½å†…å­˜æ¨¡å¼');
    
    // å‡å°‘åŒæ—¶åŠ è½½çš„èµ„æº
    // ç®€åŒ–åŠ¨ç”»å’Œè¿‡æ¸¡
    // é™åˆ¶ç¼“å­˜å¤§å°
    
    document.documentElement.classList.add('low-memory');
  }
}

// åˆå§‹åŒ–ç¯å¢ƒæ£€æµ‹
document.addEventListener('DOMContentLoaded', () => {
  EnvironmentDetector.adaptToEnvironment();
  
  // ç›‘å¬ç¯å¢ƒå˜åŒ–
  if ('connection' in navigator) {
    navigator.connection.addEventListener('change', () => {
      EnvironmentDetector.adaptToEnvironment();
    });
  }
  
  // ç›‘å¬ä¸»é¢˜å˜åŒ–
  window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
    document.documentElement.classList.toggle('dark-mode', e.matches);
  });
});
```

12. éƒ¨ç½²ä¸æ„å»ºä¼˜åŒ–

12.1 è½»é‡çº§æ„å»ºé…ç½®ç¤ºä¾‹

```json
{
  "scripts": {
    "build": "npm run clean && npm run build:html && npm run build:css && npm run build:js && npm run build:assets",
    "build:html": "html-minifier --collapse-whitespace --remove-comments --remove-optional-tags src/*.html -o dist/",
    "build:css": "postcss src/css/*.css -o dist/css/style.css --env production",
    "build:js": "npm run build:modern && npm run build:legacy",
    "build:modern": "esbuild src/js/index.js --bundle --minify --target=es2020 --outfile=dist/js/modern.js",
    "build:legacy": "esbuild src/js/index.js --bundle --minify --target=es2015 --outfile=dist/js/legacy.js",
    "build:polyfills": "cp node_modules/whatwg-fetch/dist/fetch.umd.js dist/js/polyfills/",
    "build:assets": "imagemin src/images/* --out-dir=dist/images",
    "clean": "rm -rf dist/*",
    "serve": "serve dist -p 3000",
    "deploy": "npm run build && gh-pages -d dist"
  },
  "devDependencies": {
    "esbuild": "^0.15.0",
    "postcss": "^8.4.18",
    "postcss-preset-env": "^7.8.2",
    "html-minifier": "^4.0.0",
    "imagemin-cli": "^7.0.0",
    "serve": "^14.0.0",
    "gh-pages": "^4.0.0"
  }
}
```

12.2 PostCSS é…ç½®ç¤ºä¾‹ï¼ˆæ¸è¿›å¢å¼ºCSSï¼‰

```javascript
// postcss.config.js
module.exports = {
  plugins: [
    require('postcss-preset-env')({
      stage: 3, // ä½¿ç”¨stage 3åŠä»¥ä¸Šé˜¶æ®µçš„CSSç‰¹æ€§
      features: {
        'nesting-rules': true,
        'custom-media-queries': true,
        'media-query-ranges': true,
        'custom-properties': {
          preserve: true, // ä¿ç•™CSSå˜é‡å£°æ˜
          warnings: true
        },
        'color-function': {
          preserveCustomProps: true
        },
        'lab-function': true,
        'font-format-keywords': true,
        'gap-properties': true,
        'focus-within-pseudo-class': true,
        'focus-visible-pseudo-class': {
          replaceWith: '.focus-visible'
        },
        'logical-properties-and-values': {
          preserve: true
        }
      },
      autoprefixer: {
        grid: 'autoplace', // è‡ªåŠ¨æ·»åŠ gridå‰ç¼€
        flexbox: 'no-2009'
      },
      browsers: [
        '> 0.5%', // å…¨çƒä½¿ç”¨ç‡å¤§äº0.5%
        'last 2 versions',
        'Firefox ESR',
        'not dead',
        'not ie <= 11' // æ˜ç¡®ä¸æ”¯æŒIE11
      ]
    }),
    // ç”Ÿäº§ç¯å¢ƒé¢å¤–ä¼˜åŒ–
    ...(process.env.NODE_ENV === 'production' ? [
      require('cssnano')({
        preset: 'default'
      })
    ] : [])
  ]
};
```

12.3 GitHub Pages éƒ¨ç½²ä¼˜åŒ–

```yaml
# .github/workflows/deploy.yml
name: Deploy to GitHub Pages
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    permissions:
      contents: write
      pages: write
      id-token: write
    
    steps:
      - name: Checkout
        uses: actions/checkout@v3
        with:
          fetch-depth: 0
      
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Build project
        run: npm run build
        env:
          NODE_ENV: production
      
      - name: Setup Pages
        uses: actions/configure-pages@v3
      
      - name: Upload artifact
        uses: actions/upload-pages-artifact@v1
        with:
          path: 'dist'
      
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v2
        
      # æ€§èƒ½ç›‘æ§
      - name: Run Lighthouse CI
        uses: treosh/lighthouse-ci-action@v9
        with:
          uploadArtifacts: true
          temporaryPublicStorage: true
          configPath: './lighthouserc.js'
          
      # å…¼å®¹æ€§æ£€æŸ¥
      - name: Browser Compatibility Check
        run: |
          npm run test:compatibility
          
      # å¯è®¿é—®æ€§æ£€æŸ¥
      - name: Accessibility Audit
        run: |
          npm run test:a11y
```

13. æ€»ç»“ä¸æœ€ä½³å®è·µ

13.1 æ¸è¿›å¢å¼ºæ ¸å¿ƒåŸåˆ™ï¼ˆæ€»ç»“ï¼‰

1. å†…å®¹ä¼˜å…ˆï¼šç¡®ä¿åŸºç¡€å†…å®¹åœ¨æ‰€æœ‰ç¯å¢ƒä¸‹å¯è®¿é—®
2. åŠŸèƒ½æ£€æµ‹ï¼šåŸºäºèƒ½åŠ›è€Œéæµè§ˆå™¨ç±»å‹æä¾›åŠŸèƒ½
3. åˆ†å±‚å¢å¼ºï¼šä»åŸºç¡€åˆ°é«˜çº§çš„ä½“éªŒå±‚æ¬¡
4. æ€§èƒ½æ„è¯†ï¼šæ¯ä¸ªå¢å¼ºéƒ½ä¸åº”æŸå®³æ ¸å¿ƒä½“éªŒ
5. å¯è®¿é—®æ€§ï¼šæ‰€æœ‰ç”¨æˆ·éƒ½èƒ½å®Œæˆæ ¸å¿ƒä»»åŠ¡
6. ç½‘ç»œå¼¹æ€§ï¼šæ”¯æŒå„ç§ç½‘ç»œæ¡ä»¶å’Œè®¾å¤‡èƒ½åŠ›
7. é€æ­¥å¢å¼ºï¼šä»ç¨³å®šåŸºç¡€å¼€å§‹ï¼Œé€æ­¥æ·»åŠ åŠŸèƒ½
8. ä¼˜é›…é™çº§ï¼šå½“å¢å¼ºä¸å¯ç”¨æ—¶ï¼Œå¹³ç¨³å›é€€åˆ°åŸºç¡€ä½“éªŒ

13.2 ç°ä»£ Web å¼€å‘æ ‡å‡†æ ˆ

Â· HTML: è¯­ä¹‰åŒ–æ ‡è®°ï¼Œæ¸è¿›å¢å¼ºåŸºç¡€
Â· CSS: ç‰¹æ€§æŸ¥è¯¢ï¼Œå®¹å™¨æŸ¥è¯¢ï¼Œå±‚å å±‚ï¼Œé€»è¾‘å±æ€§
Â· JavaScript: åŠ¨æ€å¯¼å…¥ï¼Œæ¨¡å—åŒ–ï¼Œé”™è¯¯æ¢å¤ï¼Œå¼±ä¾èµ–
Â· æ€§èƒ½: Core Web Vitals æŒ‡æ ‡é©±åŠ¨ï¼Œæ€§èƒ½é¢„ç®—
Â· PWA: ç¦»çº¿èƒ½åŠ›ï¼Œåº”ç”¨å¼ä½“éªŒï¼Œå¯å®‰è£…æ€§
Â· å¯è®¿é—®æ€§: WCAG 2.2 æ ‡å‡†ï¼Œé”®ç›˜å¯¼èˆªï¼Œå±å¹•é˜…è¯»å™¨æ”¯æŒ
Â· å®‰å…¨æ€§: HTTPSï¼ŒCSPï¼Œå®‰å…¨å¤´éƒ¨ï¼Œè¾“å…¥éªŒè¯

13.3 æŒç»­ç»´æŠ¤ä¸æµ‹è¯•å»ºè®®

Â· å®šæœŸæ£€æŸ¥æµè§ˆå™¨æ”¯æŒæ•°æ®ï¼ˆCan I Useï¼ŒMDN Compatibility Dataï¼‰
Â· ç›‘æ§çœŸå®ç”¨æˆ·æ€§èƒ½æ•°æ®ï¼ˆRUM - Real User Monitoringï¼‰
Â· æµ‹è¯•å¤šç§è®¾å¤‡å’Œç½‘ç»œæ¡ä»¶ï¼ˆè®¾å¤‡å®éªŒå®¤ï¼Œç½‘ç»œèŠ‚æµï¼‰
Â· è‡ªåŠ¨åŒ–å…¼å®¹æ€§æµ‹è¯•ï¼ˆBrowserStackï¼ŒSauce Labsï¼‰
Â· å…³æ³¨ Web æ ‡å‡†çš„æ–°å‘å±•ï¼ˆW3Cï¼ŒWHATWGï¼‰
Â· æ”¶é›†ç”¨æˆ·åé¦ˆå¹¶æŒç»­æ”¹è¿›
Â· å»ºç«‹æ€§èƒ½é¢„ç®—å¹¶æŒç»­ç›‘æ§
Â· å®šæœŸè¿›è¡Œå¯è®¿é—®æ€§å®¡è®¡
Â· ä¿æŒä¾èµ–é¡¹æ›´æ–°å’Œå®‰å…¨

13.4 é€‚ç”¨èŒƒå›´

Â· ç›®æ ‡å¹³å°: Webã€ç§»åŠ¨ç«¯ã€æ¡Œé¢ç«¯ã€åµŒå…¥å¼æµè§ˆå™¨ã€æ™ºèƒ½ç”µè§†
Â· é¡¹ç›®ç±»å‹: é™æ€ç«™ç‚¹ã€å•é¡µåº”ç”¨ï¼ˆSPAï¼‰ã€æ¸è¿›å¼Webåº”ç”¨ï¼ˆPWAï¼‰ã€ä¼ä¸šçº§åº”ç”¨ã€å†…å®¹ç®¡ç†ç³»ç»Ÿ
Â· æŠ€æœ¯æ ˆ: çº¯ HTML/CSS/JSï¼Œå¯ä¸ç°ä»£æ¡†æ¶ï¼ˆReactã€Vueã€Angularï¼‰ç»“åˆä½¿ç”¨
Â· éƒ¨ç½²ç¯å¢ƒ: GitHub Pagesã€Netlifyã€Vercelã€ä¼ ç»ŸæœåŠ¡å™¨ã€CDN
Â· å›¢é˜Ÿè§„æ¨¡: ä¸ªäººé¡¹ç›®ã€å°å‹å›¢é˜Ÿã€å¤§å‹ä¼ä¸šå›¢é˜Ÿ

---

æœ€åæ›´æ–°: 2025å¹´3æœˆ
å‚è€ƒæ ‡å‡†: HTML Living Standardã€WCAG 2.2ã€Core Web Vitalsã€Web App Manifest
å…¼å®¹æ€§æ•°æ®æ¥æº: Can I Useã€MDN Browser Compatibility Dataã€Web Platform Tests
é€‚ç”¨ç‰ˆæœ¬: æœ¬æŒ‡å—é€‚ç”¨äºç°ä»£æµè§ˆå™¨ï¼ˆChromeã€Firefoxã€Safariã€Edgeï¼‰åŠå…¶æœ€è¿‘ä¸¤ä¸ªä¸»è¦ç‰ˆæœ¬ï¼Œå¯¹æ—§ç‰ˆæµè§ˆå™¨æä¾›åŸºç¡€å…¼å®¹æ€§æ”¯æŒã€‚